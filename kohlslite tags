local function addGuiToPlayer(player)
    local text, color

    if table.find(OWNER, player.UserId) then
        text = "KL OWNER"
        color = Color3.new(0, 0, 1)
    elseif table.find(DEVELOPER, player.UserId) then
        text = "KL DEVELOPER"
        color = Color3.new(0.5, 0, 0.5)
    elseif table.find(ADMIN, player.UserId) then
        text = "KL ADMIN"
        color = Color3.new(1, 0, 0)
    end

    if text and color then
        player.CharacterAdded:Connect(function(character)
            local head = character:WaitForChild("Head")
            if player ~= game.Players.LocalPlayer then
                local billboardGui = createBillboardGui(text, color)
                billboardGui.Adornee = head
                billboardGui.Parent = head
            end
        end)

        if player.Character then
            local head = player.Character:FindFirstChild("Head")
            if head and player ~= game.Players.LocalPlayer then
                local billboardGui = createBillboardGui(text, color)
                billboardGui.Adornee = head
                billboardGui.Parent = head
            end
        end
    end
end

game.Players.PlayerAdded:Connect(function(player)
    addGuiToPlayer(player)
end)

for _, player in pairs(game.Players:GetPlayers()) do
    addGuiToPlayer(player)
end
